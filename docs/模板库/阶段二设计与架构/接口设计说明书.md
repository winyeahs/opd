# 接口设计说明书

**项目名称**：[项目名称]  
**版本号**：V1.0  
**创建日期**：[YYYY-MM-DD]  
**创建人**：[创建人姓名]

---

## 一、接口概述

### 1.1 接口规范

#### 1.1.1 通信协议

- **协议**：HTTP/HTTPS
- **数据格式**：JSON
- **编码**：UTF-8

#### 1.1.2 接口版本

- **版本号**：V1.0
- **版本管理**：URL路径或Header

### 1.2 认证方式

- **认证类型**：[JWT/OAuth2/Session]
- **Token传递**：Header: `Authorization: Bearer {token}`
- **Token有效期**：[有效期]

### 1.3 公共响应格式

#### 1.3.1 成功响应

```json
{
  "code": 200,
  "message": "success",
  "data": {},
  "timestamp": 1709123456789
}
```

#### 1.3.2 错误响应

```json
{
  "code": 400,
  "message": "请求参数错误",
  "errors": [],
  "timestamp": 1709123456789
}
```

---

## 二、错误码定义

| 错误码 | HTTP状态码 | 错误信息 | 说明 |
|---------|------------|----------|------|
| 200 | 200 | success | 请求成功 |
| 400 | 400 | 请求参数错误 | 参数校验失败 |
| 401 | 401 | 未授权 | 未登录或Token过期 |
| 403 | 403 | 无权限 | 无访问权限 |
| 404 | 404 | 资源不存在 | 请求的资源不存在 |
| 409 | 409 | 资源冲突 | 资源已存在或冲突 |
| 422 | 422 | 业务逻辑错误 | 业务规则不满足 |
| 500 | 500 | 服务器内部错误 | 服务器异常 |

---

## 三、用户模块

### 3.1 用户登录

**接口地址**：`POST /api/v1/auth/login`

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| username | String | 是 | 用户名 |
| password | String | 是 | 密码 |

**请求示例**：

```json
{
  "username": "admin",
  "password": "123456"
}
```

**响应参数**：

| 参数名 | 类型 | 说明 |
|--------|------|------|
| token | String | 访问Token |
| refreshToken | String | 刷新Token |
| expiresIn | Number | 过期时间（秒） |
| user | Object | 用户信息 |

**响应示例**：

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "expiresIn": 7200,
    "user": {
      "id": 1,
      "username": "admin",
      "nickname": "管理员",
      "avatar": "https://example.com/avatar.jpg"
    }
  }
}
```

### 3.2 用户注册

**接口地址**：`POST /api/v1/auth/register`

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| username | String | 是 | 用户名 |
| email | String | 是 | 邮箱 |
| password | String | 是 | 密码 |

**请求示例**：

```json
{
  "username": "testuser",
  "email": "test@example.com",
  "password": "123456"
}
```

**响应参数**：

| 参数名 | 类型 | 说明 |
|--------|------|------|
| userId | Number | 用户ID |
| username | String | 用户名 |

### 3.3 获取用户信息

**接口地址**：`GET /api/v1/users/{id}`

**路径参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Number | 是 | 用户ID |

**请求头**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| Authorization | String | 是 | Bearer Token |

---

## 四、业务模块

### 4.1 [业务模块名称]

#### 4.1.1 查询列表

**接口地址**：`GET /api/v1/[模块名]`

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| page | Number | 否 | 页码，默认1 |
| pageSize | Number | 否 | 每页数量，默认10 |
| keyword | String | 否 | 搜索关键词 |
| status | String | 否 | 状态筛选 |

**响应参数**：

| 参数名 | 类型 | 说明 |
|--------|------|------|
| list | Array | 数据列表 |
| total | Number | 总数 |
| page | Number | 当前页码 |
| pageSize | Number | 每页数量 |

**响应示例**：

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "id": 1,
        "name": "名称",
        "status": "active",
        "createdAt": "2024-01-01 12:00:00"
      }
    ],
    "total": 100,
    "page": 1,
    "pageSize": 10
  }
}
```

#### 4.1.2 获取详情

**接口地址**：`GET /api/v1/[模块名]/{id}`

**路径参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Number | 是 | 记录ID |

#### 4.1.3 创建记录

**接口地址**：`POST /api/v1/[模块名]`

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| name | String | 是 | 名称 |
| description | String | 否 | 描述 |
| status | String | 否 | 状态 |

#### 4.1.4 更新记录

**接口地址**：`PUT /api/v1/[模块名]/{id}`

**路径参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Number | 是 | 记录ID |

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| name | String | 否 | 名称 |
| description | String | 否 | 描述 |
| status | String | 否 | 状态 |

#### 4.1.5 删除记录

**接口地址**：`DELETE /api/v1/[模块名]/{id}`

**路径参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Number | 是 | 记录ID |

---

## 五、公共接口

### 5.1 文件上传

**接口地址**：`POST /api/v1/files/upload`

**请求类型**：multipart/form-data

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| file | File | 是 | 文件 |
| type | String | 是 | 文件类型：avatar/document/image |

**响应参数**：

| 参数名 | 类型 | 说明 |
|--------|------|------|
| url | String | 文件URL |
| filename | String | 文件名 |
| size | Number | 文件大小（字节） |

### 5.2 文件下载

**接口地址**：`GET /api/v1/files/{id}`

**路径参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Number | 是 | 文件ID |

### 5.3 数据导出

**接口地址**：`GET /api/v1/export/[模块名]`

**请求参数**：

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| keyword | String | 否 | 搜索关键词 |
| status | String | 否 | 状态筛选 |
| format | String | 否 | 导出格式：excel/csv/pdf，默认excel |

---

**文档结束**